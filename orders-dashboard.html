<!DOCTYPE html>
<html lang="en">
<head>
Â  <meta charset="UTF-8">
Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  <title>Fourth Gate Orders Dashboard</title>
Â  <script src="https://cdn.tailwindcss.com"></script>
Â  <script type="module">
Â  Â  // Import Firebase SDK (v9 modular)
Â  Â  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
Â  Â  import { getAuth, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";
Â  Â  import { getFirestore, collection, query, orderBy, onSnapshot } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js";

Â  Â  // Firebase Config
Â  Â const firebaseConfig = {
Â  Â  Â  Â  apiKey: "AIzaSyDcwybZJui1WKAujPclyPgBaj_bE7IK-tg",
Â  Â  Â  Â  authDomain: "fourth-gate-microgreens.firebaseapp.com",
Â  Â  Â  Â  projectId: "fourth-gate-microgreens",
Â  Â  Â  Â  storageBucket: "fourth-gate-microgreens.firebasestorage.app",
Â  Â  Â  Â  messagingSenderId: "601340343009",
Â  Â  Â  Â  appId: "1:601340343009:web:3ba10d82fca3252b3b3da0",
Â  Â  Â  Â  measurementId: "G-GM9VW1NRV9"
Â  Â  };

Â  Â  // Init
Â  Â  const app = initializeApp(firebaseConfig);
Â  Â  const auth = getAuth(app);
Â  Â  const db = getFirestore(app);

Â  Â  // DOM elements
Â  Â  const loginForm = document.getElementById("login-form");
Â  Â  const logoutBtn = document.getElementById("logout-btn");
Â  Â  const ordersDiv = document.getElementById("orders");
Â  Â  const authSection = document.getElementById("auth-section");
Â  Â  const dashboardSection = document.getElementById("dashboard");

Â  Â  // Login
Â  Â  if (loginForm) {
Â  Â  Â  Â  loginForm.addEventListener("submit", async (e) => {
Â  Â  Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  Â  Â  const email = document.getElementById('email').value;
Â  Â  Â  Â  Â  Â  const password = document.getElementById('password').value;
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  await signInWithEmailAndPassword(auth, email, password);
Â  Â  Â  Â  Â  Â  } catch (err) {
Â  Â  Â  Â  Â  Â  Â  Â  alert("Login failed: " + err.message);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });
Â  Â  }

Â  Â  // Logout
Â  Â  if (logoutBtn) {
Â  Â  Â  Â  logoutBtn.addEventListener("click", () => signOut(auth));
Â  Â  }

Â  Â  // Listen to auth state
Â  Â  onAuthStateChanged(auth, (user) => {
Â  Â  Â  if (user) {
Â  Â  Â  Â  authSection.classList.add("hidden");
Â  Â  Â  Â  dashboardSection.classList.remove("hidden");
Â  Â  Â  Â  loadOrders();
Â  Â  Â  } else {
Â  Â  Â  Â  authSection.classList.remove("hidden");
Â  Â  Â  Â  dashboardSection.classList.add("hidden");
Â  Â  Â  }
Â  Â  });

Â  Â  // --- Event Delegation for Dynamic Buttons ---
Â  Â  if (ordersDiv) {
Â  Â  Â  Â  ordersDiv.addEventListener('click', (e) => {
Â  Â  Â  Â  Â  Â  const reminderBtn = e.target.closest('.send-reminder-btn');
Â  Â  Â  Â  Â  Â  const deliveredBtn = e.target.closest('.send-delivered-btn');

Â  Â  Â  Â  Â  Â  if (reminderBtn) {
Â  Â  Â  Â  Â  Â  Â  Â  handleEmailClick(reminderBtn.dataset, getReminderEmailTemplate);
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  if (deliveredBtn) {
Â  Â  Â  Â  Â  Â  Â  Â  handleEmailClick(deliveredBtn.dataset, getDeliveredEmailTemplate);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  });
Â  Â  }

Â  Â  function handleEmailClick(dataset, templateFn) {
Â  Â  Â  Â  const { email, name } = dataset;
Â  Â  Â  Â  if (!email) {
Â  Â  Â  Â  Â  Â  console.error("No email address found for this customer.");
Â  Â  Â  Â  Â  Â  // We can't use alert, so just log to console.
Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }

Â  Â  Â  Â  const { subject, body } = templateFn(name);

Â  Â  Â  Â  const mailtoLink = `mailto:${email}?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;

Â  Â  Â  Â  // Open the user's default email client
Â  Â  Â  Â  window.location.href = mailtoLink;
Â  Â  }

Â  Â  // Helper to format timestamp
Â  Â  function formatDate(timestamp) {
Â  Â  Â  Â  if (!timestamp) return 'N/A';
Â  Â  Â  Â  // Handle Firestore Timestamp or standard Date object
Â  Â  Â  Â  const date = timestamp.toDate ? timestamp.toDate() : new Date(timestamp);
Â  Â  Â  Â  return date.toLocaleString('en-US', {Â 
Â  Â  Â  Â  Â  Â  dateStyle: 'medium',Â 
Â  Â  Â  Â  Â  Â  timeStyle: 'short'Â 
Â  Â  Â  Â  });
Â  Â  }

Â  Â  // --- EMAIL TEMPLATE HELPERS ---
Â  Â  // TODO: Customize these templates with your email content.
Â  Â  // NOTE: The body must be plain text. HTML is not reliably supported in mailto: links.
Â  Â  // Use \n for new lines.

Â  Â  function getReminderEmailTemplate(customerName) {
Â  Â  Â  Â  const subject = "Reminder: Your Fourth Gate Microgreens Order";
Â  Â  Â  Â  const body = `Hi ${customerName},

This is a friendly reminder about your upcoming microgreens order.

We'll be delivering your fresh greens soon!

Best,
The Fourth Gate Team`;
Â  Â  Â  Â  return { subject, body };
Â  Â  }

Â  Â  function getDeliveredEmailTemplate(customerName) {
Â  Â  Â  Â  const subject = "Your Fourth Gate Microgreens Order Has Been Delivered!";
Â  Â  Â  Â  const body = `Hi ${customerName},

Great news! Your latest order of fresh microgreens has been delivered.

Please retrieve it at your earliest convenience to ensure maximum freshness.

We hope you enjoy!

Best,
The Fourth Gate Team`;
Â  Â  Â  Â  return { subject, body };
Â  Â  }
Â  Â  // --- END EMAIL TEMPLATE HELPERS ---

Â  Â  // Helper to format custom contents
Â  Â  function formatContents(customContents, wheatgrassQty) {
Â  Â  Â  Â  let html = '<ul class="list-disc list-inside ml-2 text-gray-800">';
Â  Â  Â  Â  let hasItems = false;
Â  Â  Â  Â  if (customContents && Object.keys(customContents).length > 0) {
Â  Â  Â  Â  Â  Â  for (const [crop, qty] of Object.entries(customContents)) {
Â  Â  _message = "Fixing bug where wheatgrass quantities were being concatenated as strings instead of added as numbers."
Â  Â  Â  Â  Â  Â  Â  Â  html += `<li><span class="font-medium">${crop}:</span> ${qty * 4}oz</li>`;
Â  Â  Â  Â  Â  Â  Â  Â  hasItems = true;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  Â  Â  // Ensure wheatgrassQty is treated as a number
Â  Â  Â  Â  const wgQtyNum = Number(wheatgrassQty) || 0;
Â  Â  Â  Â  if (wgQtyNum > 0) {
Â  Â  Â  Â  Â  Â  Â html += `<li><span class="font-medium">Wheatgrass (5x5 tray):</span> Qty ${wgQtyNum}</li>`;
Â  Â  Â  Â  Â  Â  Â hasItems = true;
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  if (!hasItems) {
Â  Â  Â  Â  Â  Â  html += '<li class="text-gray-500 italic">No specific items listed</li>';
Â  Â  Â  Â  }
Â  Â  Â  Â  html += '</ul>';
Â  Â  Â  Â  return html;
Â  Â  }

Â  Â  // Load orders in realtime
Â  Â  function loadOrders() {
Â  Â  Â  const q = query(collection(db, "orders"), orderBy("createdAt", "desc"));
Â  Â  Â  onSnapshot(q, (snapshot) => {
Â  Â  Â  Â  ordersDiv.innerHTML = "";
Â  Â  Â  Â  if (snapshot.empty) {
Â  Â  Â  Â  Â  Â  ordersDiv.innerHTML = '<div class="text-center py-12 bg-white rounded-xl shadow-sm"><p class="text-gray-500">No orders found yet.</p></div>';
Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }

Â  Â  Â  Â  snapshot.forEach((doc) => {
Â  Â  Â  Â  Â  const order = doc.data();
Â  Â  Â  Â  Â  const addr = order.deliveryAddress || {};
Â  Â  Â  Â  Â  const currency = (order.currency || 'usd').toUpperCase();

Â  Â  Â  Â  Â  ordersDiv.innerHTML += `
Â  Â  Â  Â  Â  Â  <div class="bg-white border border-gray-200 rounded-xl overflow-hidden mb-6 shadow-sm hover:shadow-md transition-all">
Â  Â  Â  Â  Â  Â  Â  <!-- Header -->
Â  Â  Â  Â  Â  Â  Â  <div class="bg-gray-50 px-6 py-4 flex flex-col md:flex-row justify-between items-start md:items-center border-b border-gray-100">
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="mb-2 md:mb-0">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h3 class="text-lg font-bold text-[#2D4026] flex items-center gap-2">
Â  Â  Â  Â  _message = "Refining UI: Making customer name bold and larger, while de-emphasizing the 'Box Type' tag for better visual hierarchy."
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${order.customerName || 'Unknown Customer'}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-xs font-normal text-gray-500 bg-gray-200 px-2 py-1 rounded-full">${order.boxType || 'N/A'} Box</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </h3>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <!-- <a href="mailto:${order.customerEmail}" class="text-sm text-green-600 hover:underline">${order.customerEmail || 'No email'}</a> -->
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex items-center gap-3 mt-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-sm text-gray-600">${order.customerEmail || 'No email'}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button title="Send Reminder Email" class="send-reminder-btn text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-md hover:bg-blue-200 transition-colors"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  data-email="${order.customerEmail || ''}"
Â  Â  Â  Â  Â  Â  _message = "Refining UI: Making customer name bold and larger, while de-emphasizing the 'Box Type' tag for better visual hierarchy."
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  data-name="${order.customerName || 'Valued Customer'}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Reminder
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button title="Send Order Delivered Email" class="send-delivered-btn text-xs bg-green-100 text-green-800 px-2 py-1 rounded-md hover:bg-green-200 transition-colors"
s
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  data-email="${order.customerEmail || ''}"
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  data-name="${order.customerName || 'Valued Customer'}">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Delivered
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  _message = "Ensuring consistent alignment and spacing in the order card header."
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Data
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="text-left md:text-right">
Start
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Contents
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </h4>
Â  Â  Â  Â  Â  Â  Â  Â  *
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="bg-green-50 p-4 rounded-lg border border-green-100">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${formatContents(order.customContents, order.wheatgrassQuantity)}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  tents
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â ${order.rotationFavorites ? `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="mt-3">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h5 class="text-xs font-bold text-blue-800 uppercase tracking-wider mb-1">ðŸ”„ Rotation Preferences</h5>
to-one mapping
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-sm bg-blue-50 text-blue-900 p-3 rounded-lg border border-blue-100 italic">
line-height: 1.5;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  "Replace with `order.rotationFavorites`"
css
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â ` : ''}
s
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  <!-- Col 2: Delivery Info -->
style="flex-basis: 33.33%;"
Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="md:col-span-1">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <h4 class="font-bold text-gray-700 mb-3 flex items-center uppercase text-xs tracking-wider">
s
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1 text-green-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10a1 1 0 001 1h1m8-1a1 1 0 01-1 1H9m4-1V8a1 1 0 00-1-1H9m9 9h1a1 1 0 001-1v-3a1 1 0 00-1-1H9a1 1 0 00-1 1v3a1 1 0 001 1h1m9-9h-1a1 1 0 00-1 1v3a1 1 0 01-1 1h-1a1 1 0 01-1-1V6a1 1 0 00-1-1H4a1 1 0 00-1 1v3" />
s
Â  Â  Â  Â  Â  Â  Â  _message = "Adding descriptive titles and icons to each section (Contents, Delivery, System IDs) for better scannability."
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Delivery
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </h4>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="bg-gray-50 p-4 rounded-lg border border-gray-100 h-full">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="mb-2">
Â  Â  Â  Â  Â  Â  Â  Â  Click to copy
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-xs font-bold text-gray-500 uppercase">Preferred Day</span><br>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="font-medium text-gray-900">${order.deliveryDay || 'Not specified'}</span>
s
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="mt-4">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="text-xs font-bold text-gray-500 uppercase">Shipping Address</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <address class="not-italic text-sm text-gray-700 mt-1">
Entry point
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="font-semibold">${addr.recipient_name || order.customerName || ''}</span><br>
s
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${addr.line1 || ''}<br>
Â  Â  Â  S
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${addr.line2 ? addr.line2 + '<br>' : ''}
Main
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${addr.city || ''}, ${addr.state || ''} ${addr.postal_code || ''}<br>
S
s
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${addr.country || ''}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  s
Â  t-family: 'Roboto', sans-serif;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </address>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  Â  Â  Â  <!-- Col 3: Stripe/Tech Details -->
Â  Â  Â  Â  Â  Â  Â  Â  id
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <h4 class="font-bold text-gray-700 mb-3 flex items-center uppercase text-xs tracking-wider">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1 text-gray-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
Â  Â  Â  Â  Â  s
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </svg>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  System IDs
Â  Â  Â  Â  Â  Â  Â  Â  Body
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </h4>
Â  Â  Â  Â  Â  Â  Â  Â  Example
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="bg-gray-50 p-4 rounded-lg border border-gray-100 text-xs font-mono text-gray-600 space-y-2 overflow-hidden">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="font-bold text-gray-400 block">Firebase Order ID</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="break-all select-all">${doc.id}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="font-bold text-gray-400 block">Stripe Session ID</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="break-all select-all">${order.stripeSessionId || 'N/A'}</span>
s
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="font-bold text-gray-400 block">Stripe Customer ID</span>
s
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="break-all select-all">${order.stripeCustomerId || 'N/A'}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  s
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â <div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="font-bold text-gray-400 block">Stripe Subscription ID</span>
We
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="break-all select-all">${order.subscriptionId || 'N/A'}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  D
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  });
Â  Â  Â  });
Â  Â  }
Â  </script>
</head>
<body class="bg-gray-100 font-sans min-h-screen p-6">
Body
Â  <div class="max-w-6xl mx-auto">
Â  Â  Â  <div class="flex justify-between items-center mb-8">
Â  Â  Â  Â  <h1 class="text-3xl font-bold text-[#2D4026] flex items-center gap-3">
Â  Â  Â  Â  Â  Â  ðŸŒ± Fourth Gate <span class="text-gray-500 font-light">Orders Dashboard</span>
Â  Â  Â  Â  </h1>
Â  Â  Â  Â  <button id="logout-btn" class="hidden bg-white hover:bg-gray-50 text-gray-700 font-medium py-2 px-6 rounded-lg transition shadow-sm border border-gray-200">
Click to copy
Â  Â  Â  Â  Â  Â  Logout
Â  Â  Â  Â  </button>
Â  Â  _message = "Adding a 'Logout' button that only appears when the user is authenticated."
Â  Â  Â  </div>

Â  Â  Â  <!-- Login Section -->
Â  Â  Â  <div id="auth-section" class="max-w-md mx-auto bg-white p-10 rounded-2xl shadow-xl mt-20">
Â  Â  Â  Â  <div class="text-center mb-8">
Â  Â  Â  Â  Â  Â  Â <h2 class="text-2xl font-bold text-[#2D4026]">Admin Login</h2>
Â  Â  Â  Â  Â  Â  Â <p class="text-gray-500">Please sign in to view orders</p>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <form id="login-form" class="space-y-5">
Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  <label class="block text-sm font-bold text-gray-700 mb-2">Email</label>
Read
Â  Â  Â  Â  Â  Â  Â  <input type="email" id="email" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#3B7235] focus:border-[#3B7235] transition outline-none" placeholder="admin@fourthgate.com" />
s
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <div>
Â  Â  Â  Â  Â  Â  Â  <label class="block text-sm font-bold text-gray-700 mb-2">Password</label>
Â  Â  Â  Â  Â  Â  Â  <input type="password" id="password" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#3B7235] focus:border-[#3B7235] transition outline-none" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" />
Sort
Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  <button type="submit" class="w-full bg-[#3B7235] hover:bg-[#2D5829] text-white font-bold py-4 px-4 rounded-xl transition duration-200 ease-in-out transform hover:scale-[1.02]">
Body
Â  Â  Â  Â  Â  Â  Â  Sign In
Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  </form>
Â  Â  Â  </div>

Â  Â  Â  <!-- Dashboard Section -->
Â  Â  Â  <div id="dashboard" class="hidden">
Â  Â  Â  Â  <div id="orders">
Â  Â  Â  Â  Â  Â  <!-- Loading state -->
Â  Â  Â  Â  Â  Â  <div class="flex flex-col items-center justify-center py-20">
Color
Â  Â  Â  Â  Â  Â  Â  Â  <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-[#3B7235] mb-4"></div>
Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-gray-500">Loading orders...</p>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  Â  </div>
Â  </div>
</body>
</html>
